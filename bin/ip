#!/usr/bin/env node

"use strict";

let all = process.argv[2] === '-a';
let nif = require('os').networkInterfaces();

let result = Object.keys(nif).map((key) => {
  return nif[key].filter((e) => {
    return e.family === 'IPv4';
  }).map((e) => {
    e.key = key;
    return e;
  });
}).filter((e) => {
  return e.length > 0;
}).reduce((acc, e) => {
  e = e.shift();
  if (!all) {
    if (e.key.indexOf('lo') != -1) return acc;
  }
  acc.push(e.key + ': ' + e.address);
  return acc;
}, []).join('\n');

console.log(result);
