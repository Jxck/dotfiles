#!/usr/bin/env ruby

arg = ARGV[0]


if arg == "here"
  current = Dir::pwd

template = <<EOS
export GOPATH=#{current}
export PATH=$PATH:$GOROOT/bin:$GOPATH/bin
EOS
  path = File::expand_path('~') + "/.gobrew/env/.gopath"
  env = File.open(path,'w')
  env.puts template
  env.close
end

if arg == "pkg"
  puts `tree $GOROOT/src/pkg -L 2 -d`
end

if arg == "list"
  puts `\ls ~/.gobrew/go | grep go`
end

if arg == "use"
  version = ARGV[1]
  puts "use go"+version
  `rm ~/.gobrew/go/current`
  `ln -s ~/.gobrew/go/go#{version} ~/.gobrew/go/current`
end
